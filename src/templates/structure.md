# Templates Directory

The `templates` directory contains various template files used for generating TypeScript clients and other related files for interacting with a Directus instance. Below is an overview of the structure and purpose of each file and directory within the `templates` directory.

## default/static/client.ts.njk

### Header
The header block includes a comment indicating that the file is automatically generated by the `@indirectus/cli` package.

### Imports
The imports block includes necessary imports from the Directus SDK and other bindings.

### Types Namespace
The `Types` namespace defines various TypeScript types used throughout the client.

### Collections Namespace
The `Collections` namespace defines types for each collection in the Directus instance. System collections and custom collections are handled separately.

### CollectionsType
The `CollectionsType` type aggregates all collection types.

### System Interface
The `System` interface defines the schema extensions for system collections.

### Schema Interface
The `Schema` interface extends the `System` interface and includes all custom collections.

### TypedClient Type
The `TypedClient` type defines the structure of the client with methods for managing collections and items.

### DirectusCommands Type
The `DirectusCommands` type ensures compatibility with the Directus SDK commands.

### Schema Function
The `schema` function returns a typed client for interacting with the Directus instance.

### BindableClient Interface
The `BindableClient` interface allows for extending the client with additional functionality.

### Bindings Function
The `bindings` function returns a client that can be extended with additional functionality.

### createDirectusWithTypes Function
The `createDirectusWithTypes` function creates a Directus client with the specified schema and bindings.

### createTypedClient Export
The `createTypedClient` export provides a convenient way to create a typed Directus client.

## Other Files and Directories

### bindings/system-binding/index.ts.njk
This file contains the template for generating system bindings for the Directus client. It includes methods for managing system collections and items.

### bindings/item-binding/index.ts.njk
This file contains the template for generating item bindings for the Directus client. It includes methods for managing custom collections and items.

### addons
This directory contains additional templates and extensions that can be included in the generated client. These addons provide extra functionality and customization options.

### README.md
This file provides an overview and instructions for using the templates and generating the TypeScript client.

## Template Directory Structure

### plugins/
Contains template files for generating plugin-specific code.

### extensions/
Contains template files for Directus extensions:
- filters/ - Custom filter templates
- hooks/ - Hook implementation templates 
- endpoints/ - API endpoint templates

### bindings/
Contains binding templates that define how to interact with collections:

#### bindings/system-binding/
System collection binding templates:
- `index.ts.njk` - Core system bindings
- `items.ts.njk` - System items operations
- `activity.ts.njk` - Activity log bindings
- `files.ts.njk` - File management bindings
- `users.ts.njk` - User management bindings
- `roles.ts.njk` - Role management bindings
- `permissions.ts.njk` - Permission management bindings

#### bindings/item-binding/ 
Custom collection binding templates:
- `index.ts.njk` - Core item bindings
- `items.ts.njk` - CRUD operations for items
- `filter.ts.njk` - Filter building
- `sort.ts.njk` - Sort operations
- `aggregate.ts.njk` - Aggregation functions

### default/
Default template files:

#### default/static/
Static template files that don't require processing:
- `client.ts.njk` - Main client template
- `types.ts.njk` - Type definitions
- `schema.ts.njk` - Schema definitions
- `utils.ts.njk` - Utility functions

#### default/dynamic/
Templates that require processing based on schema:
- `collections.ts.njk` - Collection type definitions
- `interfaces.ts.njk` - Interface definitions
- `operations.ts.njk` - Operation type definitions

### macros/
Reusable template macros:
- `type-helpers.njk` - Type generation helpers
- `schema-helpers.njk` - Schema processing helpers
- `binding-helpers.njk` - Binding generation helpers

### filters/
Custom template filters:
- `type-filters.ts` - Type manipulation filters
- `string-filters.ts` - String manipulation filters
- `schema-filters.ts` - Schema processing filters

### partials/
Reusable template partials:
- `header.njk` - Common file header
- `imports.njk` - Common imports
- `type-definitions.njk` - Common type definitions

## Usage

Templates are processed using the Nunjucks templating engine. The template loader will:

1. Look for templates in the default directory first
2. Check for plugin-specific templates
3. Apply any custom filters and macros
4. Process the templates with the provided context
5. Generate the final TypeScript files

Template files can use:
- Macros from the macros/ directory
- Filters from the filters/ directory
- Partials from the partials/ directory
- Built-in Nunjucks features

The generated files maintain a consistent structure while allowing for customization through:
- Plugin templates
- Custom bindings
- Extension templates
- Filter and macro overrides
